<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IS/OOS Validation Report</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            color: #34495e;
            margin-top: 30px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #ecf0f1;
        }
        h3 {
            color: #555;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        .summary-box {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .metric-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #3498db;
        }
        .metric-label {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-bottom: 5px;
        }
        .metric-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        th {
            background: #34495e;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        td {
            padding: 10px 12px;
            border-bottom: 1px solid #ecf0f1;
        }
        tr:hover {
            background: #f8f9fa;
        }
        .status-good {
            color: #27ae60;
            font-weight: bold;
        }
        .status-warning {
            color: #f39c12;
            font-weight: bold;
        }
        .status-fail {
            color: #e74c3c;
            font-weight: bold;
        }
        .verdict-box {
            padding: 20px;
            border-radius: 6px;
            margin: 20px 0;
        }
        .verdict-good {
            background: #d4edda;
            border-left: 4px solid #27ae60;
        }
        .verdict-warning {
            background: #fff3cd;
            border-left: 4px solid #f39c12;
        }
        .verdict-fail {
            background: #f8d7da;
            border-left: 4px solid #e74c3c;
        }
        .check-item {
            padding: 8px 0;
            border-bottom: 1px solid #ecf0f1;
        }
        .check-item:last-child {
            border-bottom: none;
        }
        .timestamp {
            color: #7f8c8d;
            font-size: 0.9em;
            margin-top: 30px;
            text-align: right;
        }
        .section {
            margin: 30px 0;
        }
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
            background: white;
            padding: 15px;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>üìä IS/OOS Validation Report</h1>
        <div class="timestamp">Generated: 2025-12-11 18:18:11</div>
        
        <div class="section">
            <h2>üìà Overall Summary</h2>

        <div class="section">
            <h2>üìä Cumulative Equity Curve</h2>
            <div class="chart-container">
                <canvas id="equityCurveChart"></canvas>
            </div>
            <script>
                const ctx1 = document.getElementById('equityCurveChart').getContext('2d');
                const dates = ['2016-04-04', '2016-04-04', '2016-04-18', '2016-04-25', '2016-05-02', '2016-05-09', '2016-05-23', '2016-06-06', '2016-06-20', '2016-06-27', '2016-07-18', '2016-07-25', '2016-08-01', '2016-08-08', '2016-08-22', '2016-08-29', '2016-09-19', '2016-09-26', '2016-10-03', '2016-10-10', '2016-10-24', '2016-10-31', '2016-11-21', '2016-11-28', '2016-12-05', '2016-12-19', '2017-01-09', '2017-01-23', '2017-01-30', '2017-02-06', '2017-02-27', '2017-03-06', '2017-03-20', '2017-03-27', '2017-04-03', '2017-04-24', '2017-05-01', '2017-05-08', '2017-05-15', '2017-05-22', '2017-06-05', '2017-06-12', '2017-06-19', '2017-06-26', '2017-07-10', '2017-07-17', '2017-07-24', '2017-07-31', '2017-08-07', '2017-08-14', '2017-08-21', '2017-08-28', '2017-09-11', '2017-09-18', '2017-09-25', '2017-10-02', '2017-10-09', '2017-10-16', '2017-10-23', '2017-10-30', '2017-11-06', '2017-11-13', '2017-11-20', '2017-11-27', '2017-12-04', '2017-12-11', '2017-12-18', '2018-01-08', '2018-01-22', '2018-01-29', '2018-02-05', '2018-02-12', '2018-02-26', '2018-03-05', '2018-03-12', '2018-03-19', '2018-04-02', '2018-04-09', '2018-04-16', '2018-04-23', '2018-04-30', '2018-05-07', '2018-05-14', '2018-05-21', '2018-06-04', '2018-06-11', '2018-06-18', '2018-06-25', '2018-07-09', '2018-07-16', '2018-07-23', '2018-07-30', '2018-08-06', '2018-08-13', '2018-08-20', '2018-08-27', '2018-09-10', '2018-09-17', '2018-09-24', '2018-10-01', '2018-10-08', '2018-10-15', '2018-10-22', '2018-10-29', '2018-11-05', '2018-11-12', '2018-11-19', '2018-11-26', '2018-12-03', '2018-12-10', '2018-12-17', '2018-12-31', '2019-01-07', '2019-01-14', '2019-01-28', '2019-02-04', '2019-02-11', '2019-02-25', '2019-03-04', '2019-03-11', '2019-03-18', '2019-03-25', '2019-04-01', '2019-04-08', '2019-04-22', '2019-04-29', '2019-05-06', '2019-05-13', '2019-05-20', '2019-06-03', '2019-06-10', '2019-06-17', '2019-06-24', '2019-07-01', '2019-07-08', '2019-07-15', '2019-07-22', '2019-07-29', '2019-08-05', '2019-08-12', '2019-08-19', '2019-08-26', '2019-09-09', '2019-09-16', '2019-09-23', '2019-09-30', '2019-10-07', '2019-10-14', '2019-10-21', '2019-10-28', '2019-11-04', '2019-11-11', '2019-11-18', '2019-11-25', '2019-12-02', '2019-12-09', '2019-12-16', '2020-01-06', '2020-01-13', '2020-01-27', '2020-02-03', '2020-02-10', '2020-02-24', '2020-03-02', '2020-03-09', '2020-03-16', '2020-03-23', '2020-03-30', '2020-04-13', '2020-04-20', '2020-04-27', '2020-05-04', '2020-05-11', '2020-05-18', '2020-06-01', '2020-06-08', '2020-06-15', '2020-06-22', '2020-07-06', '2020-07-13', '2020-07-20', '2020-07-27', '2020-08-03', '2020-08-10', '2020-08-17', '2020-08-24', '2020-08-31', '2020-09-14', '2020-09-21', '2020-09-28', '2020-10-05', '2020-10-12', '2020-10-19', '2020-10-26', '2020-11-09', '2020-11-16', '2020-11-23', '2020-11-30', '2020-12-07', '2020-12-14', '2021-01-04', '2021-01-11', '2021-01-25', '2021-02-01', '2021-02-08', '2021-02-22', '2021-03-01', '2021-03-08', '2021-03-15', '2021-03-22', '2021-04-05', '2021-04-12', '2021-04-19', '2021-04-26', '2021-05-03', '2021-05-10', '2021-05-17', '2021-05-24', '2021-06-07', '2021-06-14', '2021-06-21', '2021-06-28', '2021-07-12', '2021-07-19', '2021-07-26', '2021-08-02', '2021-08-09', '2021-08-16', '2021-08-23', '2021-08-30', '2021-09-13', '2021-09-20', '2021-09-27', '2021-10-04', '2021-10-11', '2021-10-18', '2021-10-25', '2021-11-01', '2021-11-08', '2021-11-15', '2021-11-22', '2021-11-29', '2021-12-06', '2021-12-13', '2021-12-27', '2022-01-03', '2022-01-10', '2022-01-24', '2022-01-31', '2022-02-07', '2022-02-14', '2022-02-28', '2022-03-07', '2022-03-14', '2022-03-21', '2022-03-28', '2022-04-18', '2022-04-25', '2022-05-02', '2022-05-09', '2022-05-16', '2022-05-23', '2022-06-06', '2022-06-13', '2022-06-27', '2022-07-11', '2022-07-18', '2022-07-25', '2022-08-01', '2022-08-08', '2022-08-15', '2022-08-22', '2022-08-29', '2022-09-12', '2022-09-19', '2022-09-26', '2022-10-03', '2022-10-10', '2022-10-17', '2022-10-24', '2022-10-31', '2022-11-07', '2022-11-14', '2022-11-21', '2022-11-28', '2022-12-05', '2022-12-12', '2022-12-19', '2023-01-09', '2023-01-23', '2023-01-30', '2023-02-06', '2023-02-13', '2023-02-27', '2023-03-06', '2023-03-13', '2023-03-20', '2023-03-27', '2023-04-10', '2023-04-17', '2023-04-24', '2023-05-01', '2023-05-08', '2023-05-15', '2023-05-22', '2023-06-05', '2023-06-12', '2023-06-26', '2023-07-10', '2023-07-17', '2023-07-24', '2023-07-31', '2023-08-07', '2023-08-14', '2023-08-21', '2023-08-28', '2023-09-11', '2023-09-18', '2023-09-25', '2023-10-02', '2023-10-09', '2023-10-16', '2023-10-23', '2023-10-30', '2023-11-06', '2023-11-13', '2023-11-20', '2023-11-27', '2023-12-04', '2023-12-11', '2023-12-18', '2024-01-08', '2024-01-22', '2024-01-29', '2024-02-05', '2024-02-12', '2024-02-26', '2024-03-04', '2024-03-11', '2024-03-18', '2024-04-01', '2024-04-08', '2024-04-15', '2024-04-22', '2024-04-29', '2024-05-06', '2024-05-13', '2024-05-20', '2024-06-03', '2024-06-10', '2024-06-24', '2024-07-01', '2024-07-08', '2024-07-15', '2024-07-22', '2024-07-29', '2024-08-05', '2024-08-12', '2024-08-19', '2024-08-26', '2024-09-09', '2024-09-16', '2024-09-23', '2024-09-30', '2024-10-07', '2024-10-14', '2024-10-21', '2024-10-28', '2024-11-11', '2024-11-18', '2024-11-25', '2024-12-02', '2024-12-09', '2024-12-16', '2025-01-06', '2025-01-13', '2025-01-27', '2025-02-03', '2025-02-10', '2025-02-24', '2025-03-03', '2025-03-17', '2025-03-24', '2025-03-31', '2025-04-07', '2025-04-21', '2025-04-28', '2025-05-05', '2025-05-12', '2025-05-19', '2025-06-02', '2025-06-09', '2025-06-16', '2025-06-23', '2025-07-07', '2025-07-14', '2025-07-21', '2025-07-28', '2025-08-04', '2025-08-11', '2025-08-18', '2025-08-25', '2025-09-08', '2025-09-15', '2025-09-22', '2025-09-29', '2025-10-06', '2025-10-13', '2025-10-20', '2025-10-27', '2025-11-03', '2025-11-10', '2025-11-17', '2025-11-24', '2025-12-01'];
                const equity = [100000.0, 100037.8, 99881.0, 100163.8, 100046.2, 99178.6, 98096.40000000001, 97965.00000000001, 98885.8, 97807.40000000001, 97770.6, 97973.80000000002, 98256.60000000002, 98210.60000000002, 99173.00000000001, 98815.40000000001, 99168.2, 98750.99999999999, 97973.4, 97482.0, 98340.59999999999, 99062.99999999999, 99170.99999999999, 100024.99999999999, 99443.59999999999, 98997.59999999999, 98731.2, 97969.8, 98084.2, 97388.2, 98921.8, 98175.8, 98539.4, 97401.79999999999, 96739.59999999999, 96338.19999999998, 96222.99999999999, 96076.99999999999, 98446.4, 98691.2, 99454.40000000001, 98648.0, 99563.2, 99508.0, 99632.8, 99802.2, 100333.20000000001, 100038.0, 101782.80000000002, 101336.80000000002, 100114.60000000002, 100317.80000000003, 100742.60000000003, 101518.20000000004, 101722.20000000004, 101517.80000000003, 101373.80000000003, 101869.40000000002, 102054.20000000003, 102237.80000000003, 103643.40000000004, 103846.60000000005, 104767.00000000004, 104661.40000000005, 104845.00000000004, 105509.40000000004, 106164.60000000003, 107339.80000000003, 108183.00000000004, 107380.80000000005, 108362.40000000005, 109014.40000000005, 110497.60000000006, 110974.60000000005, 111152.40000000005, 110729.40000000005, 111030.60000000005, 109732.20000000004, 110154.60000000003, 110406.60000000003, 110444.40000000002, 109642.20000000003, 110345.00000000001, 110888.6, 110937.20000000001, 110700.40000000001, 110804.40000000002, 110056.80000000003, 110666.20000000003, 110770.20000000004, 111933.40000000004, 111976.60000000003, 111561.40000000004, 112044.60000000003, 112748.60000000003, 112093.00000000003, 111976.20000000003, 113149.80000000003, 112872.60000000002, 113191.20000000003, 113143.20000000003, 112484.80000000003, 113046.40000000002, 113167.60000000003, 113169.60000000003, 113271.20000000004, 114625.20000000006, 114866.80000000005, 114688.00000000004, 114899.20000000006, 117226.20000000006, 117307.00000000004, 117934.00000000006, 118596.40000000005, 119098.00000000004, 120061.20000000004, 119438.20000000004, 120121.40000000004, 119039.20000000004, 118832.00000000004, 120155.20000000004, 120207.20000000003, 120735.00000000004, 120918.60000000005, 121121.80000000003, 121365.00000000004, 122967.00000000004, 121794.00000000004, 120646.00000000004, 120073.00000000004, 119295.40000000004, 121247.80000000003, 120129.40000000004, 120092.60000000005, 121295.80000000005, 120899.00000000004, 121051.40000000005, 123784.20000000007, 124085.40000000008, 122987.40000000008, 123209.00000000007, 123770.60000000008, 123353.00000000007, 124510.80000000006, 126088.60000000006, 124651.00000000007, 123557.20000000007, 122779.60000000006, 122382.80000000006, 124546.40000000005, 124460.00000000004, 124143.20000000004, 123626.40000000004, 124670.60000000003, 124223.00000000003, 124825.40000000002, 124469.00000000003, 124471.40000000002, 125074.60000000002, 125451.60000000002, 124778.60000000002, 123630.60000000002, 123991.80000000002, 124492.6, 125223.40000000001, 127974.20000000003, 130355.00000000001, 130645.40000000001, 131096.2, 131017.00000000001, 131273.2, 131104.0, 131720.2, 131441.80000000002, 131593.00000000003, 133244.20000000004, 134670.40000000002, 134026.60000000003, 134048.20000000004, 135024.40000000005, 136046.00000000006, 135762.20000000007, 135863.80000000008, 136315.80000000008, 135992.80000000008, 136494.40000000008, 137396.00000000006, 137457.20000000004, 137218.40000000005, 137654.60000000006, 137505.80000000005, 137407.40000000005, 138249.00000000006, 139135.20000000007, 139176.80000000005, 137778.40000000005, 137181.60000000006, 137023.20000000007, 136584.80000000008, 137906.40000000008, 136962.6000000001, 135898.8000000001, 138260.4000000001, 137706.6000000001, 138448.20000000007, 137769.80000000008, 139311.40000000008, 140133.00000000006, 140754.60000000006, 140576.20000000007, 139528.60000000006, 139480.60000000006, 140157.60000000006, 139484.60000000006, 139136.60000000006, 140213.60000000006, 141155.20000000007, 141547.60000000006, 142374.60000000006, 143016.20000000007, 143318.20000000007, 144161.00000000006, 143848.80000000008, 142710.40000000008, 144332.8000000001, 144134.8000000001, 144137.6000000001, 148140.80000000008, 146792.80000000008, 146915.2000000001, 145916.8000000001, 144628.00000000012, 144030.00000000012, 144151.20000000013, 144152.80000000013, 143954.80000000013, 145307.20000000016, 146859.20000000016, 148241.60000000018, 148318.60000000018, 150774.20000000016, 150935.80000000016, 149827.00000000017, 151708.60000000018, 152060.60000000018, 153143.0000000002, 152604.6000000002, 154615.80000000022, 155427.0000000002, 156343.20000000022, 156524.4000000002, 156810.60000000018, 156461.40000000017, 155902.20000000016, 155813.40000000017, 154314.60000000018, 153970.8000000002, 154941.6000000002, 154722.4000000002, 154943.20000000022, 155739.40000000023, 156700.60000000024, 156791.40000000026, 159342.60000000024, 160333.80000000025, 162155.40000000026, 162576.60000000024, 163162.80000000022, 163484.40000000023, 165561.40000000023, 167163.40000000023, 167209.6000000002, 168260.8000000002, 167742.4000000002, 170384.00000000017, 170914.8000000002, 170841.0000000002, 171941.4000000002, 172812.6000000002, 172363.80000000022, 173460.0000000002, 173935.4000000002, 174897.00000000017, 177632.60000000018, 179734.2000000002, 181461.2000000002, 182573.6000000002, 183100.60000000024, 184381.40000000026, 184908.40000000026, 185959.60000000027, 187432.0000000003, 184704.40000000029, 185696.8000000003, 187123.8000000003, 187875.8000000003, 187477.8000000003, 187229.8000000003, 188177.6000000003, 190000.40000000029, 189027.40000000029, 189449.8000000003, 189802.60000000033, 190525.8000000003, 187658.6000000003, 187661.8000000003, 191445.4000000003, 192968.6000000003, 192891.80000000028, 193664.6000000003, 193787.80000000028, 194665.6000000003, 195342.6000000003, 196360.40000000029, 196742.0000000003, 196654.40000000029, 197097.6000000003, 198300.8000000003, 199052.8000000003, 199579.8000000003, 200306.80000000028, 202349.20000000027, 202076.20000000027, 202328.2000000003, 202120.6000000003, 201803.8000000003, 202032.6000000003, 204875.8000000003, 205418.20000000033, 206672.20000000033, 207260.8000000003, 207387.8000000003, 209551.00000000032, 210753.4000000003, 211106.2000000003, 208904.8000000003, 208967.2000000003, 206809.6000000003, 207547.4000000003, 208320.20000000033, 209572.20000000033, 211185.00000000035, 209612.00000000035, 211239.00000000035, 209766.00000000035, 208263.80000000034, 212367.8000000003, 212449.4000000003, 213526.40000000034, 214129.60000000036, 212931.60000000036, 213835.20000000036, 214036.80000000037, 214879.60000000036, 214072.00000000035, 215653.60000000036, 215744.80000000037, 215686.40000000037, 218728.00000000038, 218684.2000000004, 218336.2000000004, 220613.20000000036, 220285.60000000036, 222176.80000000037, 222058.00000000038, 221160.00000000038, 220787.00000000038, 221127.80000000037, 219679.80000000037, 219936.00000000035, 220136.20000000033, 220117.80000000034, 217600.60000000036, 217723.00000000032, 218955.40000000034, 220282.40000000034, 221108.60000000036, 218450.20000000036, 219713.00000000035, 221484.20000000033, 223105.4000000003, 223721.60000000033, 223783.20000000033, 228629.4000000003, 234150.20000000033, 233471.00000000035, 235407.20000000036, 236888.80000000034, 238615.80000000037, 238817.80000000034, 239764.00000000035, 240011.80000000037, 244604.20000000036, 244081.20000000036, 242833.20000000036, 242535.60000000036, 241668.00000000035, 241954.20000000033, 241531.20000000033, 241653.60000000036, 241115.20000000036, 242716.80000000037, 242993.80000000034, 245920.8000000003, 245572.8000000003, 246955.2000000003, 246557.2000000003, 249234.2000000003, 247175.8000000003, 250507.00000000032, 249584.00000000032, 250036.00000000032, 251126.8000000003, 250290.00000000032, 250767.00000000032];
                const isEndIdx = 249;
                const valEndIdx = 332;
                const isBoundaryDate = '2022-02-07';
                const valBoundaryDate = '2024-01-22';
                
                // Find min and max equity values for vertical line range
                const minEquity = Math.min(...equity);
                const maxEquity = Math.max(...equity);
                const equityRange = maxEquity - minEquity;
                const lineTop = maxEquity + equityRange * 0.05;
                const lineBottom = minEquity - equityRange * 0.05;
                
                // Create single continuous line with all equity points
                const equityDataPoints = equity.map((val, idx) => ({x: idx, y: val}));
                
                // Single dataset for the equity curve
                const datasets = [{
                    label: 'Equity',
                    data: equityDataPoints,
                    borderColor: 'rgb(52, 152, 219)',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    fill: false,
                    tension: 0,
                    pointRadius: 0,
                    pointHoverRadius: 4,
                    spanGaps: false
                }];
                
                // Add vertical lines at boundaries using line datasets
                // These will appear as vertical lines since x is constant and y varies
                if (isEndIdx !== null && isEndIdx >= 0 && isEndIdx < equity.length) {
                    datasets.push({
                        label: 'IS / Validation OOS' + (isBoundaryDate ? ' (' + isBoundaryDate + ')' : ''),
                        data: [
                            {x: isEndIdx, y: lineBottom},
                            {x: isEndIdx, y: lineTop}
                        ],
                        borderColor: 'rgb(241, 196, 15)',
                        backgroundColor: 'transparent',
                        borderWidth: 3,
                        borderDash: [8, 4],
                        fill: false,
                        tension: 0,
                        pointRadius: 0,
                        pointHoverRadius: 0,
                        showLine: true
                    });
                }
                if (valEndIdx !== null && valEndIdx >= 0 && valEndIdx < equity.length) {
                    datasets.push({
                        label: 'Validation OOS / Final OOS' + (valBoundaryDate ? ' (' + valBoundaryDate + ')' : ''),
                        data: [
                            {x: valEndIdx, y: lineBottom},
                            {x: valEndIdx, y: lineTop}
                        ],
                        borderColor: 'rgb(231, 76, 60)',
                        backgroundColor: 'transparent',
                        borderWidth: 3,
                        borderDash: [8, 4],
                        fill: false,
                        tension: 0,
                        pointRadius: 0,
                        pointHoverRadius: 0,
                        showLine: true
                    });
                }
                
                const equityData = {
                    labels: dates,
                    datasets: datasets
                };
                new Chart(ctx1, {
                    type: 'line',
                    data: equityData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'Cumulative Equity Curve'
                            },
                            legend: {
                                display: true,
                                position: 'top'
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    title: function(context) {
                                        return dates[context[0].dataIndex];
                                    },
                                    label: function(context) {
                                        if (context.datasetIndex === 0) {
                                            return 'Equity: $' + context.parsed.y.toLocaleString('en-US', {maximumFractionDigits: 2});
                                        }
                                        return context.dataset.label;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                type: 'linear',
                                title: {
                                    display: true,
                                    text: 'Trade Number'
                                },
                                position: 'bottom'
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Equity ($)'
                                },
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value.toLocaleString('en-US');
                                    }
                                }
                            }
                        }
                    }
                });
            </script>
        </div>

        <div class="section">
            <h2>üìä P/L Per Contract Distribution</h2>
            <div class="chart-container">
                <canvas id="plHistogramChart"></canvas>
            </div>
            <script>
                const ctx3 = document.getElementById('plHistogramChart').getContext('2d');
                const plData = [5.4, -19.6, 40.4, -19.6, -144.60000000000002, -154.6, -14.6, 460.40000000000003, -269.59999999999997, -4.6000000000000005, 25.4, 40.400000000000006, -4.6, 160.4, -59.599999999999994, 50.4, -59.6, -129.6, -54.6, 95.39999999999999, 120.39999999999999, 5.4, 85.4, -64.6, -44.599999999999994, -29.599999999999998, -84.6, 10.4, -69.6, 170.4, -74.6, 40.4, -189.6, -94.6, -44.6, -9.6, -14.6, 215.4, 20.400000000000002, 95.4, -89.6, 70.39999999999999, -4.6000000000000005, 10.4, 15.4, 35.4, -24.599999999999998, 145.4, -44.6, -174.6, 25.4, 35.4, 55.4, 20.400000000000002, -14.6, -9.6, 35.4, 15.4, 20.400000000000002, 100.39999999999999, 25.400000000000002, 35.4, -9.6, 20.4, 60.4, 50.4, 90.39999999999999, 105.39999999999999, -114.60000000000001, 245.4, 130.4, 185.4, 95.4, 25.400000000000002, -84.60000000000001, 100.39999999999999, -324.6, 70.39999999999999, 50.4, 5.3999999999999995, -114.60000000000001, 100.39999999999999, 60.4, 5.4, -29.599999999999998, 10.399999999999999, -124.6, 55.4, 10.4, 145.4, 5.4, -34.6, 60.4, 70.4, -59.6, -14.6, 130.4, -39.6, 35.4, -9.600000000000001, -164.6, 140.4, 40.4, 0.39999999999999997, 25.4, 135.4, 60.400000000000006, -59.6, 70.4, 465.4, 40.4, 125.39999999999999, 110.39999999999999, 125.39999999999999, 120.4, -124.6, 85.4, -154.60000000000002, -29.599999999999998, 165.4, 10.4, 75.39999999999999, 20.4, 25.4, 30.400000000000002, 320.4, -234.6, -229.60000000000002, -114.60000000000001, -129.6, 325.40000000000003, -279.6, -4.6, 150.4, -49.6, 25.4, 390.4, 100.4, -219.6, 55.400000000000006, 140.4, -69.6, 165.4, 225.4, -239.6, -364.59999999999997, -129.6, -49.599999999999994, 240.39999999999998, -9.6, -39.6, -64.60000000000001, 45.4, -74.6, 100.39999999999999, -39.6, 0.39999999999999997, 75.4, 75.39999999999999, -134.6, -229.6, 120.39999999999999, 250.39999999999998, 365.4, 1375.4, 1190.4, 290.40000000000003, 225.4, -39.6, 85.4, -84.6, 205.4, -69.6, 50.4, 550.4, 475.4, -214.60000000000002, 5.4, 325.4, 255.4, -94.60000000000001, 25.4, 90.4, -64.60000000000001, 125.39999999999999, 225.4, 20.400000000000002, -79.6, 145.39999999999998, -49.6, -24.6, 210.4, 295.40000000000003, 10.4, -349.6, -74.6, -39.6, -109.6, 330.40000000000003, -314.6, -354.59999999999997, 590.4, -184.60000000000002, 185.4, -169.6, 385.40000000000003, 205.4, 155.4, -44.6, -174.6, -9.6, 135.4, -134.6, -69.60000000000001, 215.39999999999998, 235.4, 65.39999999999999, 165.4, 160.4, 60.4, 120.4, -44.6, -284.6, 270.4, -39.599999999999994, 0.39999999999999997, 500.40000000000003, -269.6, 20.400000000000002, -249.6, -429.6, -119.60000000000001, 40.4, 0.4, -39.6, 225.4, 310.4, 230.4, 15.4, 175.4, 40.4, -369.6, 470.4, 70.39999999999999, 180.4, -134.6, 670.4, 270.4, 305.40000000000003, 60.4, 95.39999999999999, -174.6, -279.59999999999997, -29.6, -499.6, -114.60000000000001, 485.40000000000003, -109.6, 110.4, 265.40000000000003, 320.4, 45.4, 850.4, 330.4, 455.40000000000003, 140.4, 195.4, 80.39999999999999, 415.40000000000003, 320.4, 15.399999999999999, 350.4, -129.6, 660.4, 265.40000000000003, -24.599999999999998, 1100.4, 290.40000000000003, -149.6, 365.40000000000003, 475.4, 240.4, 195.4, 525.4, 345.4, 185.4, 105.4, 640.4, 105.4, 350.40000000000003, 245.40000000000003, -454.59999999999997, 165.4, 285.4, 150.4, -79.60000000000001, -49.6, 135.4, 260.40000000000003, -194.60000000000002, 70.39999999999999, 50.4, 90.4, -409.6, 0.39999999999999997, 420.40000000000003, 190.4, -9.6, 110.4, 15.399999999999999, 125.39999999999999, 135.4, 145.39999999999998, 95.4, -14.600000000000001, 55.400000000000006, 150.4, 150.4, 105.39999999999999, 145.4, 340.4, -54.6, 50.4, -34.6, -39.6, 10.4, 355.4, 90.39999999999999, 125.39999999999999, 65.4, 25.400000000000002, 270.40000000000003, 200.4, 50.4, -244.6, 10.4, -359.59999999999997, 105.4, 110.4, 250.39999999999998, 230.4, -314.6, 325.4, -294.59999999999997, -214.6, 410.4, 20.4, 215.4, 75.4, -239.60000000000002, 100.4, 50.4, 120.39999999999999, -134.6, 395.40000000000003, 30.400000000000002, -14.6, 760.4, -14.600000000000001, -69.60000000000001, 455.40000000000003, -54.599999999999994, 630.4, -39.6, -179.60000000000002, -74.60000000000001, 170.39999999999998, -289.6, 85.4, 15.399999999999999, -4.6, -359.6, 20.4, 205.4, 265.40000000000003, 275.4, -664.6, 180.4, 590.4, 540.4, 205.39999999999998, 15.4, 1615.4, 2760.4, -339.59999999999997, 645.4, 370.40000000000003, 345.40000000000003, 40.4, 315.4, 35.4, 765.4, -104.60000000000001, -249.6, -49.6, -144.6, 95.4, -84.60000000000001, 20.400000000000002, -134.6, 400.4, 55.400000000000006, 585.4, -69.60000000000001, 230.4, -79.6, 535.4, -514.6, 1110.3999999999999, -184.6, 90.39999999999999, 545.4000000000001, -104.6, 95.4];
                
                // Calculate histogram bins with $100 jumps
                const min = Math.min(...plData);
                const max = Math.max(...plData);
                const binWidth = 500;  // $500 jumps
                const binStart = Math.floor(min / binWidth) * binWidth;  // Round down to nearest $100
                const binEnd = Math.ceil(max / binWidth) * binWidth;     // Round up to nearest $100
                const binCount = Math.ceil((binEnd - binStart) / binWidth);
                const bins = Array(binCount).fill(0);
                const binLabels = [];
                
                // Create bin labels
                for (let i = 0; i < binCount; i++) {
                    const binLower = binStart + i * binWidth;
                    const binUpper = binLower + binWidth;
                    binLabels.push(`$${binLower} - ${binUpper}`);
                }
                
                // Count values in each bin
                plData.forEach(value => {
                    const binIndex = Math.min(Math.floor((value - binStart) / binWidth), binCount - 1);
                    if (binIndex >= 0 && binIndex < binCount) {
                        bins[binIndex]++;
                    }
                });
                
                const histogramData = {
                    labels: binLabels,
                    datasets: [{
                        label: 'Frequency',
                        data: bins,
                        backgroundColor: 'rgba(52, 152, 219, 0.6)',
                        borderColor: 'rgb(52, 152, 219)',
                        borderWidth: 1
                    }]
                };
                
                new Chart(ctx3, {
                    type: 'bar',
                    data: histogramData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'P/L Per Contract Distribution'
                            },
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    title: function(context) {
                                        const binIndex = context[0].dataIndex;
                                        return binLabels[binIndex];
                                    },
                                    label: function(context) {
                                        return 'Count: ' + context.parsed.y;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'P/L Per Contract ($)'
                                },
                                ticks: {
                                    maxRotation: 45,
                                    minRotation: 45
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Frequency'
                                },
                                beginAtZero: true
                            }
                        }
                    }
                });
            </script>
        </div>

        <div class="section">
            <h2>üìà Overall Summary</h2>
            <div class="summary-box">
                <p><strong>Data Source:</strong> example_backtests/Monday-2-4-DC.csv</p>
                <p><strong>Total Trades:</strong> 414</p>
                <p><strong>Period:</strong> 2016-04-04 ‚Üí 2025-12-01</p>
                <p><strong>Allocation Strategy:</strong> percent</p>
                <p><strong>Allocation Value:</strong> 4.0% of equity</p>
                <p><strong>Initial Equity:</strong> $100,000.00</p>
            </div>
        </div>

        <div class="section">
            <h2>In-Sample (Train)</h2>
            <div class="metric-grid">
                <div class="metric-card">
                    <div class="metric-label">CAGR</div>
                    <div class="metric-value">7.86%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Max Drawdown</div>
                    <div class="metric-value">-4.08%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Win Rate</div>
                    <div class="metric-value">60.08%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Total Return</div>
                    <div class="metric-value">55.43%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">MAR Ratio</div>
                    <div class="metric-value">1.93</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Starting Equity</div>
                    <div class="metric-value">$100,000.00</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Ending Equity</div>
                    <div class="metric-value">$155,427.00</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Total Trades</div>
                    <div class="metric-value">248</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>Validation OOS (Dev)</h2>
            <div class="metric-grid">
                <div class="metric-card">
                    <div class="metric-label">CAGR</div>
                    <div class="metric-value">15.94%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Max Drawdown</div>
                    <div class="metric-value">-1.73%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Win Rate</div>
                    <div class="metric-value">76.83%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Total Return</div>
                    <div class="metric-value">31.66%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">MAR Ratio</div>
                    <div class="metric-value">9.23</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Starting Equity</div>
                    <div class="metric-value">$100,000.00</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Ending Equity</div>
                    <div class="metric-value">$131,662.80</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Total Trades</div>
                    <div class="metric-value">82</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>Final OOS (Test)</h2>
            <div class="metric-grid">
                <div class="metric-card">
                    <div class="metric-label">CAGR</div>
                    <div class="metric-value">8.87%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Max Drawdown</div>
                    <div class="metric-value">-2.00%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Win Rate</div>
                    <div class="metric-value">64.29%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Total Return</div>
                    <div class="metric-value">17.50%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">MAR Ratio</div>
                    <div class="metric-value">4.44</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Starting Equity</div>
                    <div class="metric-value">$100,000.00</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Ending Equity</div>
                    <div class="metric-value">$117,502.80</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Total Trades</div>
                    <div class="metric-value">84</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>üîç Validation OOS (Dev) Validation</h2>
            <div class="verdict-box verdict-fail">
                <h3>Overall Verdict: <span class="status-fail">FAIL</span></h3>
                <p>‚ö†Ô∏è Edge may be conditional or OOS period unusually favorable</p>
            </div>
            
            <h3>Metrics Comparison</h3>
            <table>
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>IS</th>
                        <th>OOS</th>
                        <th>Ratio (OOS/IS)</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <td>CAGR</td>
                        <td>7.86%</td>
                        <td>15.94%</td>
                        <td>2.03x</td>
                        <td><span class="status-fail">‚úó Fail</span></td>
                    </tr>

                    <tr>
                        <td>Max Drawdown</td>
                        <td>-4.08%</td>
                        <td>-1.73%</td>
                        <td>0.42x</td>
                        <td><span class="status-warning">‚ö† Warning</span></td>
                    </tr>

                    <tr>
                        <td>MAR Ratio</td>
                        <td>1.93</td>
                        <td>9.23</td>
                        <td>4.79x</td>
                        <td><span class="status-good">‚úì Good</span></td>
                    </tr>

                    <tr>
                        <td>Win Rate</td>
                        <td>60.08%</td>
                        <td>76.83%</td>
                        <td>16.7pp</td>
                        <td><span class="status-fail">‚úó Fail</span></td>
                    </tr>

                </tbody>
            </table>
            
            <h3>Validation Checks</h3>
            <div class="verdict-box">
                <div class="check-item"><span class="status-good">‚úì OOS is profitable (31.66%)</span></div>
                <div class="check-item"><span class="status-warning">WARNING: OOS CAGR ratio (2.03x) - much better (IS: 7.86%, OOS: 15.94%) - edge may be conditional</span></div>
                <div class="check-item"><span class="status-good">‚úì OOS Max Drawdown ratio (0.42x) - similar or lower (IS: -4.08%, OOS: -1.73%)</span></div>
                <div class="check-item"><span class="status-fail">FAIL: OOS win rate differs by 16.7pp from IS (IS: 60.08%, OOS: 76.83%) - exploded</span></div>
                <div class="check-item"><span class="status-good">‚úì OOS P/L variance ratio (0.64x) - stable</span></div>
                <div class="check-item"><span class="status-good">‚úì OOS MAR ratio (4.79x) - acceptable (IS: 1.93, OOS: 9.23)</span></div>

            </div>
        </div>

        <div class="section">
            <h2>üîç Final OOS (Test) Validation</h2>
            <div class="verdict-box verdict-good">
                <h3>Overall Verdict: <span class="status-good">GOOD</span></h3>
                <p>‚≠ê Strong evidence of real edge</p>
            </div>
            
            <h3>Metrics Comparison</h3>
            <table>
                <thead>
                    <tr>
                        <th>Metric</th>
                        <th>IS</th>
                        <th>OOS</th>
                        <th>Ratio (OOS/IS)</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>

                    <tr>
                        <td>CAGR</td>
                        <td>7.86%</td>
                        <td>8.87%</td>
                        <td>1.13x</td>
                        <td><span class="status-good">‚úì Good</span></td>
                    </tr>

                    <tr>
                        <td>Max Drawdown</td>
                        <td>-4.08%</td>
                        <td>-2.00%</td>
                        <td>0.49x</td>
                        <td><span class="status-warning">‚ö† Warning</span></td>
                    </tr>

                    <tr>
                        <td>MAR Ratio</td>
                        <td>1.93</td>
                        <td>4.44</td>
                        <td>2.30x</td>
                        <td><span class="status-good">‚úì Good</span></td>
                    </tr>

                    <tr>
                        <td>Win Rate</td>
                        <td>60.08%</td>
                        <td>64.29%</td>
                        <td>4.2pp</td>
                        <td><span class="status-good">‚úì Good</span></td>
                    </tr>

                </tbody>
            </table>
            
            <h3>Validation Checks</h3>
            <div class="verdict-box">
                <div class="check-item"><span class="status-good">‚úì OOS is profitable (17.50%)</span></div>
                <div class="check-item"><span class="status-good">‚úì OOS CAGR ratio (1.13x) - slightly better (IS: 7.86%, OOS: 8.87%)</span></div>
                <div class="check-item"><span class="status-good">‚úì OOS Max Drawdown ratio (0.49x) - similar or lower (IS: -4.08%, OOS: -2.00%)</span></div>
                <div class="check-item"><span class="status-good">‚úì OOS win rate within ¬±5% of IS (IS: 60.08%, OOS: 64.29%, diff: 4.2pp)</span></div>
                <div class="check-item"><span class="status-good">‚úì OOS P/L variance ratio (0.87x) - stable</span></div>
                <div class="check-item"><span class="status-good">‚úì OOS MAR ratio (2.30x) - acceptable (IS: 1.93, OOS: 4.44)</span></div>

            </div>
        </div>

        <div class="section">
            <h2>üé≤ Monte Carlo Validation</h2>
            <div class="verdict-box verdict-good">
                <h3>Overall Verdict: <span class="status-good">GOOD</span></h3>
            </div>
            
            <div class="summary-box">
                <p><strong>Monte Carlo Simulations:</strong> 1,000</p>
                <p><strong>Trades per Path:</strong> 84</p>
            </div>
            
            <h3>Monte Carlo Equity Curves</h3>

            <div class="chart-container">
                <canvas id="mcEquityChart"></canvas>
            </div>
            <script>
                const ctx2 = document.getElementById('mcEquityChart').getContext('2d');
                const bestData = [100000.0, 100080.79999999999, 100891.99999999999, 100248.19999999998, 100938.99999999999, 101300.19999999998, 101090.99999999999, 101452.2, 102983.0, 103673.79999999999, 105204.59999999999, 106735.4, 106566.2, 107476.99999999999, 107569.39999999998, 107600.59999999998, 107461.39999999997, 107546.79999999996, 107447.59999999996, 107288.39999999995, 107933.79999999996, 108624.99999999997, 108665.79999999997, 109196.59999999996, 109366.99999999996, 110477.39999999995, 112529.39999999994, 113070.59999999995, 112781.39999999995, 112951.79999999994, 113353.39999999994, 114274.99999999994, 115890.39999999995, 118650.79999999996, 120946.99999999996, 121747.79999999997, 121938.59999999998, 124400.99999999997, 124571.39999999998, 126092.19999999998, 125883.39999999998, 126634.59999999996, 127279.99999999997, 127250.79999999996, 127326.99999999997, 127737.79999999997, 128998.59999999996, 129079.39999999997, 129000.19999999997, 131462.59999999998, 132384.19999999998, 134846.59999999998, 135016.99999999997, 135498.59999999998, 136249.8, 136220.59999999998, 137021.39999999997, 137822.19999999998, 139188.4, 140010.0, 142882.8, 142343.99999999997, 142754.79999999996, 144106.79999999996, 145862.99999999994, 145624.19999999995, 147844.99999999997, 148491.19999999998, 148252.39999999997, 149253.99999999997, 149945.19999999995, 148686.79999999996, 148477.99999999994, 147924.19999999995, 148005.79999999996, 148458.19999999995, 148239.79999999996, 150520.99999999994, 149491.79999999993, 148952.99999999994, 149479.99999999994, 148596.19999999995, 147266.99999999994, 148618.99999999994, 149221.39999999994];
                const medianData = [100000.0, 100410.8, 100806.2, 101107.79999999999, 101508.19999999998, 100864.39999999998, 101180.59999999999, 101681.4, 102142.2, 102234.6, 102780.0, 102610.8, 102207.0, 102302.4, 102387.79999999999, 102928.99999999999, 103459.79999999997, 102960.59999999998, 103391.39999999998, 102412.99999999997, 103943.79999999997, 104124.59999999996, 104714.99999999996, 105215.79999999996, 105716.59999999995, 105991.99999999994, 105832.79999999994, 105863.59999999993, 105893.99999999993, 107509.39999999992, 106920.19999999992, 106910.99999999993, 106597.19999999992, 108212.59999999992, 108543.79999999992, 108584.59999999992, 108615.79999999992, 108576.19999999991, 108096.99999999991, 107783.19999999991, 107753.99999999991, 108355.19999999991, 108525.59999999992, 110056.39999999992, 110747.19999999992, 110433.39999999992, 111344.19999999992, 111960.39999999992, 110631.19999999992, 111232.39999999992, 111308.59999999992, 111403.99999999991, 112034.39999999992, 112725.19999999992, 112355.99999999993, 112757.59999999992, 112468.39999999992, 112899.19999999992, 112689.99999999991, 112100.79999999992, 112131.19999999992, 112223.59999999992, 111144.79999999992, 111745.99999999991, 112546.79999999992, 112622.99999999991, 112483.79999999992, 112914.5999999999, 113229.99999999991, 113545.3999999999, 113630.7999999999, 113906.1999999999, 112827.3999999999, 112668.1999999999, 113589.7999999999, 114235.19999999991, 114311.39999999992, 114102.19999999991, 115468.39999999992, 115459.19999999992, 116540.79999999993, 116842.39999999994, 117012.79999999993, 117118.99999999993, 117529.79999999992];
                const worstData = [100000.0, 100180.8, 99777.0, 99887.80000000002, 100318.6, 100149.40000000001, 99484.80000000002, 99690.20000000003, 100191.00000000003, 100051.80000000003, 99648.00000000003, 99853.40000000004, 99264.20000000004, 98749.60000000003, 98720.40000000004, 98621.20000000004, 98522.00000000004, 97857.40000000004, 98548.60000000005, 98144.80000000005, 98160.20000000004, 98435.60000000003, 98976.00000000003, 99377.60000000003, 99653.00000000004, 99969.20000000004, 99960.00000000004, 100276.20000000004, 100921.60000000003, 101462.80000000003, 101573.60000000002, 101659.00000000003, 101069.80000000003, 100590.60000000002, 100631.40000000001, 100812.20000000001, 100843.40000000001, 101213.8, 101204.6, 101305.40000000001, 101366.60000000002, 102477.00000000001, 102517.80000000002, 102918.20000000003, 103234.40000000002, 103340.60000000002, 102261.80000000002, 102293.00000000001, 102444.20000000001, 102275.0, 102865.40000000001, 103556.2, 102967.0, 102452.40000000001, 102283.20000000001, 101204.40000000001, 101045.20000000001, 101696.00000000001, 102091.40000000002, 101113.00000000001, 100523.80000000002, 100924.20000000003, 100565.00000000003, 100225.40000000002, 100686.20000000003, 100587.00000000001, 100547.40000000002, 100408.20000000003, 100909.00000000001, 100774.40000000001, 100460.6, 100521.8, 99443.00000000001, 99553.80000000002, 99539.20000000001, 99180.00000000001, 99020.80000000002, 98911.60000000002, 98397.00000000001, 97807.80000000002, 96729.00000000001, 95650.20000000001, 95680.6, 95861.40000000001, 95852.20000000001];
                const nTrades = 85;
                
                const mcData = {
                    labels: Array.from({length: nTrades}, (_, i) => i),
                    datasets: [
                        {
                            label: 'Best Case',
                            data: bestData.map((val, idx) => ({x: idx, y: val})),
                            borderColor: 'rgb(39, 174, 96)',
                            backgroundColor: 'rgba(39, 174, 96, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0,
                            pointRadius: 0,
                            pointHoverRadius: 4
                        },
                        {
                            label: 'Median Case',
                            data: medianData.map((val, idx) => ({x: idx, y: val})),
                            borderColor: 'rgb(52, 152, 219)',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0,
                            pointRadius: 0,
                            pointHoverRadius: 4
                        },
                        {
                            label: 'Worst Case',
                            data: worstData.map((val, idx) => ({x: idx, y: val})),
                            borderColor: 'rgb(231, 76, 60)',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0,
                            pointRadius: 0,
                            pointHoverRadius: 4
                        }
                    ]
                };
                new Chart(ctx2, {
                    type: 'line',
                    data: mcData,
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        },
                        plugins: {
                            title: {
                                display: true,
                                text: 'Monte Carlo Equity Curves (Best, Median, Worst)'
                            },
                            legend: {
                                display: true,
                                position: 'top'
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false,
                                callbacks: {
                                    label: function(context) {
                                        return context.dataset.label + ': $' + context.parsed.y.toLocaleString('en-US', {maximumFractionDigits: 2});
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                title: {
                                    display: true,
                                    text: 'Trade Number'
                                }
                            },
                            y: {
                                title: {
                                    display: true,
                                    text: 'Equity ($)'
                                },
                                ticks: {
                                    callback: function(value) {
                                        return '$' + value.toLocaleString('en-US');
                                    }
                                }
                            }
                        }
                    }
                });
            </script>

            <h3>Key Metrics</h3>
            <div class="metric-grid">
                <div class="metric-card">
                    <div class="metric-label">OOS Max Drawdown</div>
                    <div class="metric-value">-2.00%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">OOS MDD Percentile in MC</div>
                    <div class="metric-value">35.4th</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Probability of Positive Return</div>
                    <div class="metric-value">99.9%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">5th Percentile Return</div>
                    <div class="metric-value">8.20%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">1st Percentile Return</div>
                    <div class="metric-value">3.44%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Dispersion Ratio</div>
                    <div class="metric-value">0.54</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">MC Efficiency</div>
                    <div class="metric-value">7.70</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Catastrophic Failure Prob</div>
                    <div class="metric-value">0.0%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Bad Win Rate Paths</div>
                    <div class="metric-value">1.8%</div>
                </div>
                <div class="metric-card">
                    <div class="metric-label">Noise-to-Signal Ratio</div>
                    <div class="metric-value">0.0595</div>
                </div>
            </div>
            
            <h3>Validation Checks</h3>
            <div class="verdict-box">
                <div class="check-item"><span class="status-good">‚úì OOS MDD (-2.00%) between median and 80th percentile MC MDD (-2.28%--1.68%) - normal</span></div>
                <div class="check-item"><span class="status-good">‚úì PoPR (99.9%) > 80% - very strong consistency</span></div>
                <div class="check-item"><span class="status-good">‚úì 5th percentile return (8.20%) > -10% - good</span></div>
                <div class="check-item"><span class="status-good">‚úì 1st percentile return (3.44%) > -20% - good</span></div>
                <div class="check-item"><span class="status-good">‚úì Dispersion ratio (0.54) between 0.5-1.0 - normal</span></div>
                <div class="check-item"><span class="status-good">‚úì MC Efficiency (7.70) > 0.5 - strong (robust strategy)</span></div>
                <div class="check-item"><span class="status-good">‚úì Catastrophic failure probability (0.0%) < 1% - excellent</span></div>
                <div class="check-item"><span class="status-good">‚úì Bad win rate paths (1.8%) < 5% - stable</span></div>
                <div class="check-item"><span class="status-good">‚úì NSR (0.0595) < 0.5 - excellent</span></div>

            </div>
        </div>

    </div>
</body>
</html>
